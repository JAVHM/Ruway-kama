<!DOCTYPE html>
<html>
    <head>
        <link href="/styles/listatorneos.css" rel="stylesheet" type="text/css" />
        <link href="/styles/catalogo.css" rel="stylesheet" type="text/css" />
        <link href="/styles/bootstrap.css" rel="stylesheet" type="text/css" />
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Train+One&display=swap" rel="stylesheet">
        <script src="/js/bootstrap.bundle.js"></script>
    </head>

    <body class="container">
        <%- include('header') %>
        <div id="tabla">
            <div class="row mb-2">
                <div class="col mt-2">
                    <form method="POST" action="/usuarios/nombre">
                        <input placeholder="Buscar por nombre" name="name" type="text" class="form-control">
                    </form>
                </div>
                <form class="col row" action="/usuarios/filtro" method="POST">
                    <div class="col"> 
                        <select class="form-select mt-2" name="filtrar" id="filtrar">
                             <option value="Administrador">Administrador</option>
                             <option value="Organizador">Organizador</option>
                             <option value="Lider">Lider</option>
                         </select>
                    </div>
                    <div class="col mt-2">
                        <button type="submit" class="btn btn-success">Filtrar</button>
                    </div>
                </form>
            </div>
        <h2>Lista de usuarios</h2>
        <table id="tablita" class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Correo</th>
                    <th>Rol</th>
                    <th>Acci√≥n</th>
                </tr>
            </thead>
            <tbody id="data_usuarios">
                <% usuario.forEach((u) => { %> 
                    <tr>
                        <td><%= u.id %></td>
                        <td><%= u.nombre %></td>
                        <td><%= u.correo %></td>
                        <td><%= u.rol %></td>
                        <td>
                            <a href="/usuario/editar/<%= u.id %>" >Editar</a>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
        <div class="row">
            <% if(pages) { %>
                <nav class="mt-3 mx-auto">
                    <ul class="pagination">
                        <% if(current==1) {%>
                        <li class="page-item disabled">
                            <a href="" class="page-link">First Page</a>
                        </li>
                        <% } else {%>
                            <li class="page-item">
                                <a href="/usuarios/1" class="page-link">First Page</a>
                            </li>
                        <% } %>
                        <!-- PAGES -->
                        <% var i = (Number(current)> 3 ? Number(current) - 2 : 1) %>
                        <% if(i !== 1) {%>
                            <a href="#" class="page-link">...</a>
                        <% } %>
                        <% for(; i <= (Number(current) + 3 ) && i<= pages;i++) { %>
                            <% if ( i==current) { %>
                                <li class="page-item">
                                    <a href="<%= i %>" class="page-link">
                                        <%= i %>
                                    </a>
                                </li>
                            <% } else { %>
                            <li class="page-item">
                                <a href="/usuarios/<%= i %>" class="page-link">
                                <%= i %>
                                </a>
                            </li>
                        <% } %>
                        <% if (i == Number(current) + 4 && i< pages) {%>
                            <li class="page-item">
                                <a href="#" class="page-link">...</a>
                            </li>
                        <% } %>
                        <% } %>
                        
                        <!-- <li  class="page-item">
                            <a  class="page-link">
                                <form method="POST" action="/usuarios/page">
                                <input name="page" type="text" class="form-control" id="bp" size="1">
                                </form>
                            </a>
                        </li> -->
                         
                        <% if(current==pages) { %>
                            <li class="page-item disabled">
                                <a href="a" class="page-link">Last Item</a>
                            </li>
                          <% } else {%>
                            <li class="page-item">
                                <a class="page-link" href="/usuarios/<%=pages%>">Last Item</a>
                            </li>
                          <% }%>
                    </ul>
                </nav>
            <% } %>
        </div>
        <a href="/usuario/crear" type="button" class="col-2 mt-2 btn btn-success mb-2 mt-1 mx-1">Crear nuevo usuario</a>
    </div>
    </body>
</html>